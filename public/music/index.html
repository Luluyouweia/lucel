<!DOCTYPE html>
<html>

<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<meta charseet="utf-8">
	<title>鹿鹿音乐</title>
	<style>
	*{
		margin: 0;padding: 0;
		box-sizing: border-box;
		font-family: "Droid Sans Fallback";
		font-weight: 300;color: #000;
	}
	html,body{
		background: rgb(244,244,244);
	}
	#topbar{
		background: rgb(39,39,39);
		position: fixed;text-align: center;top: 0;left: 0;
		width: 100vw;padding: 9px 0;
		color: #eee;height: 50px;
		font-weight: 200;z-index: 8;
	}
	.show-bar{
		width: 90vw;height: 40vw;margin: 15px auto;
		border: 1px solid #000;border-radius: 8px;
	}
	#page{
		position: relative;
	}
	.content{
		display: inline-block;
		width: 46vw;margin: 12px 0 0 3vw;height: 30vw;
		background: #fff;padding: 12px;
		border: 1px solid #eee;border-radius: 8px;
		position: relative;background-size: 100%;
		z-index: 0;
	}
	.content .init{
		position: absolute;width: 100%;height: 100%;top: 0;left: 0;
		padding: 12px;background: rgb(255,255,255,0.45);
		overflow: hidden;transition: 0.6s;
	}
	.content .init:hover{
		background: rgb(255,255,255,0.7);top: 70%;
	}
	#music{
		position: fixed;bottom: 0;width: 100vw;padding: 3px 20px;
		background: #fff;display: flex;justify-content: space-around;
		border-top: 1px solid #eee;
		z-index: 9;
	}
	#music *{
		color: #fff;display: inline-block;font-size: 10px;font-weight: 200;
	}
	
	#tools{
		width: 100vw;display: flex;
		background: #fff;border-bottom: 1px solid #eee;
		position: fixed;top: 50px;height: 30px;
		overflow-x: auto;padding: 1px 5px;
		z-index: 8;
	}
	#tools li{
		display: inline-block;margin: 1px 15px;white-space: no-warp;
		flex: 0 0 auto;font-size: 14px;font-weight: 300;
	}
	.text244{
		color: rgb(122,122,122);
	}
	.c-text{
		text-align: center;
	}
	#player{
		width: 100vw;height: 100vh;
		position: fixed; top: 110vh;left: 0;
		background-color: rgb(255,255,255,0.7);
		background-size: cover;background-repeat: no-repeat;
		transition: 0.8s;display: block;background-position: center;
		z-index: 8;
	}
		#boardMusicTitle{
			display: block;width: 100vw;text-align: center;
			margin: 14vh auto 8px; font-size: 28px;
			padding: 30px;background: rgb(255,255,255,0.5);
		}
	#playerBG{
		background-repeat: no-repeat;background-size: 100%;	
	}
	audio::-webkit-media-controls-time-remaining-display{
		color: #9cf;/*后数*/
	}
	audio::-webkit-media-controls-current-time-display{
		color: #08f;/*前数*/
	}
	audio::-webkit-media-controls-play-button{
		color: #08f;
	}
	.back{
		display: block;position: absolute;
		background: none;text-weight: 200;transition: 0.3s;border-radius: 50%;
		width: 50px;height: 50px;font-size: 13px;text-align: center;border: none;padding: 15px;
		outline: none;background: rgb(255,255,255,0.3);
	}
	.back:hover{
		background: rgb(255,255,255,0.85);
	}
	.common-button,full-button:hover{
		background: #fff;border: 1px solid #08f;border-radius: 30px;
		outline: none;padding: 10px 18px;height: 48px;color: #08f;text-align: center;
		transition: 0.4s;margin: 8px;
	}
		.full-button,.common-button:hover{
			background: #08f;border: 1px solid #eee;border-radius:  30px;
			outline: none;padding: 10px 18px;height: 48px;color: #fff;text-align: center;
			transition: 0.4s;margin: 8px;
		}
	.space{
		display: flex;justify-content: space-around;width: 100%;
	}
	.space>*{
		display: block;
	}
	.little-float-model-box{
		background: #fff;border: 1px solid #eee;border-radius: 8px;
		padding: 16px;position: fixed;display: block;
		top: 0;bottom: 0;left: 0;right: 0;margin: auto;
		width: 38vw; height: 38vw;overflow: auto;
		font-size: 15px;
		z-index: 10;
	}
	</style>			
</head>	
<body>
	<div id="topbar">Lucel Music House <span style="font-size: 8px;color: #eee;">(大多版权来自网易云音乐)</span></div><div style="height: 50px"></div>
		<ul id="tools">
		<li>推荐</li>
		<li>精选</li>
		<li>高级</li>
		<li>流行BGM</li>
		<li>经典</li>
		<li>伤感</li>
		<li>超燃</li>
		<li>搞笑</li>
		<li>电音</li>
		<li>游戏</li>
		<li>动漫</li>
		<li>原创</li>
	</ul>
	
	<div style="height: 30px"></div>
	
	<div id="page" ></div>
	
	<section id="player">
		<div id="boardMusicTitle">曲目</div>
		<button class="back" style="top: 1.5vh;right: 6vw;" onclick="back('playerScreen')">╳</button>
		<div id="playerBG">
			<div id="inner"></div>
		</div>
		<div class="space"><button class="common-button" style="top: 80vh;">更多</button></div>
	</section>
	
	<audio id="music" controls><source src="" type="audio/mp3"></source></audio>
	
	<br><br><br>
	<script src="https://luspecial.vercel.app/music/data.js"></script>
	<script>
	var $=(ele)=>{
		var i=document.querySelectorAll(ele);
		if(i.length==1)return i[0];
		return document.querySelectorAll(i);
	}
		function play(n){
			if((("#music").src)!=("https://music.163.com/song/media/outer/url?id="+data[n].id))
			{
					listen();
				if(data[n].id){
					$("#music").src="https://music.163.com/song/media/outer/url?id="+data[n].id;
					$("#music").play();
					console.log(n);
					console.log($("#music"))
					playerDisplay(n);
				}else{
					$("#music").src=data[n].mid;
					$("#music").play();
					console.log(n);
					console.log($("#music"))
					playerDisplay(n);
				}
			}
			return n;
		}
		var listen=()=>{
			var t,f;
			$("#music").onloadstart=()=>{
				f=1;
			}
			var change=()=>{
				console.log("努力加载中");
				loading(0);
			}
			$("#music").onprogress=change();
			$("#music").oncanplay=()=>{
				f=0;
				removeLoading(0);
			}
			var t=setTimeout(()=>{
				if(f==1)loading(1);
				f=0;
				removeLoading(0);
			},20000)
		}
		function playerDisplay(i){
			$("#player").style.backgroundImage="url("+data[i].img+")";
			$("#player").style.top=0;
			$("#boardMusicTitle").innerHTML=data[i].title;
		}

		for(let i=0;i<data.length;++i){
			//var type=data[i].type.split(";");
				//var len=type.length;
			//console.log(len)
			var bg="<div class='content' onclick='play("+i+")' style='background-image:url("+data[i].img+")'>"
			var title="<div class='init'><h3>"+data[i].title+"</h3>";
			var text="<div class='text244'>"+data[i].text+"</div></div>";
			$("#page").innerHTML+=bg+title+text;
		}
		//console.log(document.body.innerHTML)
		
		var back=(obj)=>{
			if(obj=="playerScreen"){
				$("#player").style.top="110vh";
				return ;
			}
		}
	
	//独立区间	
	var loadingBox=document.createElement("div");
		loadingBox.className="little-float-model-box";
		loadingBox.innerHTML="<h4 class='c-text'>加载中...</h4><div class='space'><button class='common-button' onclick='cancelLocateMusic()' '>取消</button></div>";
	var cannotLoadMusic=document.createElement("div");
		cannotLoadMusic.className="little-float-model-box";
		cannotLoadMusic.innerHTML="<h4>加载失败：超时</h4><div>但我们会试图继续努力加载</div><button onclick='removeLoading(1)' class='full-button'>确认</button>"
		
	var element=document.body; 
	var loading=(i)=>{
		if(i==0)element.appendChild(loadingBox);
		if(i==1)element.appendChild(cannotLoadMusic);
	}
	var removeLoading=(i)=>{
		if(i==0){element.removeChild(loadingBox);}
		else if(i==1){element.removeChild(cannotLoadMusic)};
	}
	//end
	
	var cancelLocateMusic=()=>{
		$("#music").src="";
		removeLoading(0);
	}
	</script>
</body>
</html>

    
    
    
    
    
    
    